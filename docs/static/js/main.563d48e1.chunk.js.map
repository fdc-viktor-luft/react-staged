{"version":3,"sources":["staged/css-vars.ts","staged/useArrangeAfterResize.ts","staged/useStopDragClick.ts","staged/useAutoSlide.ts","staged/useDragging.ts","staged/StagedDraggable.tsx","staged/useSlideAmounts.ts","staged/Staged.tsx","staged/usePaging.ts","staged/useSlides.tsx","staged/util.ts","staged/InfinityStaged.tsx","staged/useInfinityPaging.ts","staged/useInfinitySlides.tsx","mocks.ts","Img.tsx","Example1.tsx","Example2.tsx","Example3.tsx","Example4.tsx","Example5.tsx","Example6.tsx","index.tsx","App.tsx"],"names":["CssVar","_set","name","value","current","style","setProperty","_setX","factor","TRANSFORM_X","clientWidth","finish","ref","DURATION","useInitCssVars","amount","animation","useLayoutEffect","CssVars","goTo","update","transition","eFactor","noAnimation","Promise","resolve","setTimeout","AMOUNT","String","ANIMATION","useArrangeAfterResize","useEffect","rearrangeAfterResize","window","addEventListener","removeEventListener","useStopDragClick","stopClick","useRef","stopDraggedClick","e","stopPropagation","NoopAutoSlider","start","stop","useAutoSlide","next","autoSlide","autoSlider","useMemo","id","setInterval","clearInterval","createAutoSlider","pageX","touches","StagedDraggable","outerRef","forwardRef","slides","stagedRef","prev","isLeft","isRight","lastEnteredX","undefined","draggedX","onEnter","useCallback","onMove","currentX","onLeave","totalDraggedX","Math","abs","useDragging","className","onMouseDown","onTouchStart","onTouchMove","onMouseMove","onTouchEnd","onMouseUp","onMouseLeave","useSlideAmounts","Array","fill","map","_","i","Staged","children","hideArrows","noDrag","length","useState","pos","setPos","limit","max","page","nextPos","min","then","pageRef","usePaging","amounts","key","useSlides","onClick","modulo","num","base","InfinityStaged","paged","state","setState","useInfinityPaging","useInfinitySlides","articles","authors","title","cover","Img","article","clicked","setClicked","src","alt","draggable","Example1","a","differentSort","sort","random","Example2","setAutoSlide","onChange","target","isNaN","htmlFor","type","Example3","slice","Example4","ArticleView","Example5","useMedia","nums","Example6","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.563d48e1.chunk.js","sourcesContent":["import { MutableRefObject, useLayoutEffect } from 'react';\n\nexport type StagedRef = MutableRefObject<HTMLDivElement | null>;\nexport type SlideAnimation = typeof CSSStyleDeclaration.prototype.animation;\nexport const ANIMATION_TIME = 0.5; // in seconds\n\nenum CssVar {\n    DURATION = '--s-trans-dur',\n    ANIMATION = '--s-trans-animation',\n    TRANSFORM_X = '--s-transform-x',\n    AMOUNT = '--s-amount',\n}\n\nconst _set = ({ current }: StagedRef, name: CssVar, value: string): void => {\n    if (current) {\n        current.style.setProperty(name, value);\n    }\n};\n\n// should be in [0, 2]\n// where 0 means left end, 1 means center and 2 the right end\ntype Factor = number;\n\nconst _setX = ({ current }: StagedRef, value: number = 0, factor: Factor): void => {\n    if (current) {\n        current.style.setProperty(CssVar.TRANSFORM_X, `${-current.clientWidth * factor + value}px`);\n    }\n};\nconst goTo = (ref: StagedRef, factor: Factor) => {\n    _set(ref, CssVar.DURATION, `${ANIMATION_TIME}s`);\n    _setX(ref, 0, factor);\n};\n\nconst update = (ref: StagedRef, value: number) => _setX(ref, value, 1);\nconst amount = (ref: StagedRef, value: number) => _set(ref, CssVar.AMOUNT, String(value));\nconst animation = (ref: StagedRef, value: SlideAnimation = 'ease-out') => _set(ref, CssVar.ANIMATION, value);\n\nconst finish = (ref: StagedRef) => {\n    _set(ref, CssVar.DURATION, '0');\n    _setX(ref, 0, 1);\n};\n\n/**\n * eFactor (effective factor) is between [-1, 1] to page the slider.\n */\nconst transition = (ref: StagedRef, eFactor: number, noAnimation: boolean): Promise<void> => {\n    if (noAnimation) return Promise.resolve(finish(ref));\n\n    CssVars.goTo(ref, eFactor + 1);\n    return new Promise(resolve => {\n        setTimeout(() => {\n            finish(ref);\n            resolve();\n        }, 1000 * ANIMATION_TIME);\n    });\n};\n\nexport const useInitCssVars = (ref: StagedRef, amount: number, animation?: SlideAnimation) => {\n    useLayoutEffect(() => {\n        CssVars.amount(ref, amount);\n    }, [amount]); // eslint-disable-line react-hooks/exhaustive-deps\n    useLayoutEffect(() => {\n        CssVars.animation(ref, animation);\n    }, [animation]); // eslint-disable-line react-hooks/exhaustive-deps\n};\n\nexport const CssVars = { goTo, finish, update, transition, amount, animation };\n","import { useEffect } from 'react';\nimport { CssVars, StagedRef } from './css-vars';\n\nexport const useArrangeAfterResize = (ref: StagedRef) => {\n    useEffect(() => {\n        const rearrangeAfterResize = () => CssVars.finish(ref);\n        window.addEventListener('resize', rearrangeAfterResize);\n        return () => window.removeEventListener('resize', rearrangeAfterResize);\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n};\n","import { MutableRefObject, useEffect, useRef } from 'react';\nimport { StagedRef } from './css-vars';\n\nexport const useStopDragClick = (ref: StagedRef): MutableRefObject<boolean> => {\n    const stopClick = useRef<boolean>(false);\n\n    useEffect(() => {\n        const { current } = ref;\n\n        const stopDraggedClick = (e: Event) => {\n            if (stopClick.current) e.stopPropagation();\n        };\n        if (current) {\n            current.addEventListener('click', stopDraggedClick, true);\n            return () => current.removeEventListener('click', stopDraggedClick, true);\n        }\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return stopClick;\n};\n","import { useEffect, useMemo } from 'react';\n\nexport type AutoSlider = { start: () => void; stop: () => void };\nexport const NoopAutoSlider = { start: () => {}, stop: () => {} };\nconst noTimer: NodeJS.Timeout = 0 as any;\nconst createAutoSlider = (next: () => void, autoSlide?: number): AutoSlider => {\n    let id: NodeJS.Timeout = noTimer;\n    if (!autoSlide) return NoopAutoSlider;\n    else\n        return {\n            start: () => {\n                if (!id) {\n                    id = setInterval(next, autoSlide);\n                }\n            },\n            stop: () => {\n                clearInterval(id);\n                id = noTimer;\n            },\n        };\n};\n\nexport const useAutoSlide = (next: () => void, autoSlide?: number): AutoSlider => {\n    const autoSlider = useMemo(() => createAutoSlider(next, autoSlide), [next, autoSlide]);\n    useEffect(() => {\n        autoSlider.start();\n        return autoSlider.stop;\n    }, [autoSlider]);\n    return autoSlider;\n};\n","import { CssVars, StagedRef } from './css-vars';\nimport { MouseEvent, TouchEvent, useCallback, useRef } from 'react';\nimport { useStopDragClick } from './useStopDragClick';\nimport { AutoSlider, NoopAutoSlider } from './useAutoSlide';\n\nconst DRAG_INTENT_RATE = 0.1; // in [0, 1]\n\ntype TouchOrMouseEvent = TouchEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>;\nconst pageX = (e: TouchOrMouseEvent): number => ('touches' in e ? (e.touches[0] as any).pageX : e.pageX);\n\ntype TouchOrMouseCb = (e: TouchOrMouseEvent) => void;\ntype UseDraggingReturnType = [TouchOrMouseCb, TouchOrMouseCb, TouchOrMouseCb];\n\nexport const useDragging = (\n    ref: StagedRef,\n    stagedRef: StagedRef,\n    prev: () => void,\n    next: () => void,\n    autoSlider: AutoSlider = NoopAutoSlider,\n    isLeft?: boolean,\n    isRight?: boolean\n): UseDraggingReturnType => {\n    const stopClick = useStopDragClick(stagedRef);\n    const lastEnteredX = useRef<number | void>(undefined);\n    const draggedX = useRef<number>(0);\n\n    const onEnter = useCallback(\n        e => {\n            autoSlider.stop();\n            lastEnteredX.current = pageX(e);\n        },\n        [autoSlider]\n    );\n\n    const onMove = useCallback(\n        e => {\n            const currentX = lastEnteredX.current;\n            if (currentX !== undefined) {\n                draggedX.current = pageX(e) - currentX;\n                if (isLeft && draggedX.current > 0) return;\n                if (isRight && draggedX.current < 0) return;\n                CssVars.update(ref, draggedX.current);\n            }\n        },\n        [isLeft, isRight] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const onLeave = useCallback(() => {\n        const { current } = ref;\n        const currentX = lastEnteredX.current;\n        const totalDraggedX = draggedX.current;\n        if (current && currentX !== undefined) {\n            // only inside here we need to perform any actions\n            autoSlider.start();\n            lastEnteredX.current = undefined;\n            draggedX.current = 0;\n            stopClick.current = !!totalDraggedX;\n            const wasDragIntent = Math.abs(totalDraggedX) / current.clientWidth > DRAG_INTENT_RATE;\n            if (wasDragIntent) {\n                if (isLeft && totalDraggedX > 0) return;\n                if (isRight && totalDraggedX < 0) return;\n                return totalDraggedX < 0 ? next() : prev();\n            }\n            // we make the back transition always with animation\n            // because dragging itself was kind of an animation\n            CssVars.transition(ref, 0, false);\n        }\n    }, [next, prev, stopClick, autoSlider, isLeft, isRight]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return [onEnter, onMove, onLeave];\n};\n","import React, { ReactNode } from 'react';\nimport { StagedRef } from './css-vars';\nimport { useDragging } from './useDragging';\nimport { AutoSlider } from './useAutoSlide';\n\nexport type StagedDraggableProps = {\n    outerRef: StagedRef;\n    forwardRef: StagedRef;\n    slides: ReactNode[];\n    prev: () => void;\n    next: () => void;\n    autoSlider?: AutoSlider;\n    isLeft?: boolean;\n    isRight?: boolean;\n};\n\nexport const StagedDraggable: React.FC<StagedDraggableProps> = ({\n    outerRef,\n    forwardRef,\n    slides,\n    prev,\n    next,\n    autoSlider,\n    isLeft,\n    isRight,\n}) => {\n    const [onEnter, onMove, onLeave] = useDragging(outerRef, forwardRef, prev, next, autoSlider, isLeft, isRight);\n\n    return (\n        <div\n            className=\"staged\"\n            ref={forwardRef}\n            onMouseDown={onEnter}\n            onTouchStart={onEnter}\n            onTouchMove={onMove}\n            onMouseMove={onMove}\n            onTouchEnd={onLeave}\n            onMouseUp={onLeave}\n            onMouseLeave={onLeave}>\n            {slides}\n        </div>\n    );\n};\n","import { useMemo } from 'react';\n\nexport const useSlideAmounts = (amount: number): number[] =>\n    useMemo(\n        () =>\n            Array(amount * 3)\n                .fill(undefined)\n                .map((_, i) => i - amount),\n        [amount]\n    );\n","import React, { ReactNode, useRef } from 'react';\nimport { useArrangeAfterResize } from './useArrangeAfterResize';\nimport { usePaging } from './usePaging';\nimport { useInitCssVars, SlideAnimation } from './css-vars';\nimport { StagedDraggable } from './StagedDraggable';\nimport { useSlides } from './useSlides';\n\ntype StagedProps = {\n    children: ReactNode[];\n    amount?: number;\n    hideArrows?: boolean;\n    noDrag?: boolean;\n    animation?: SlideAnimation;\n};\n\nexport const Staged: React.FC<StagedProps> = ({ children, amount = 1, hideArrows, noDrag, animation }) => {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const stagedRef = useRef<HTMLDivElement | null>(null);\n    useArrangeAfterResize(ref);\n    useInitCssVars(ref, amount, animation);\n    const [pos, prev, next, isLeft, isRight] = usePaging(ref, children.length, amount, animation === 'none');\n    const slides = useSlides(children, amount, pos);\n\n    return (\n        <div className=\"staged-outer\" ref={ref}>\n            {hideArrows || isLeft || <div className=\"staged-left-nav\" onClick={prev} />}\n            {noDrag ? (\n                <div className=\"staged\" ref={stagedRef}>\n                    {slides}\n                </div>\n            ) : (\n                <StagedDraggable\n                    outerRef={ref}\n                    forwardRef={stagedRef}\n                    prev={prev}\n                    next={next}\n                    slides={slides}\n                    isLeft={isLeft}\n                    isRight={isRight}\n                />\n            )}\n            {hideArrows || isRight || <div className=\"staged-right-nav\" onClick={next} />}\n        </div>\n    );\n};\n","import { useCallback, useState, useRef, useEffect } from 'react';\nimport { CssVars, StagedRef } from './css-vars';\n\ntype UsePagingReturnType = [number, () => void, () => void, boolean, boolean];\n\nexport const usePaging = (\n    ref: StagedRef,\n    length: number,\n    amount: number,\n    noAnimation: boolean\n): UsePagingReturnType => {\n    const [pos, setPos] = useState(0);\n    const isLeft = pos === 0;\n    const limit = Math.max(0, length - amount);\n    const isRight = pos >= limit;\n\n    useEffect(() => {\n        if (pos > limit) setPos(limit);\n    }, [amount, pos, limit]);\n\n    const page = useCallback(\n        (factor: -1 | 1) => {\n            const nextPos = factor === 1 ? Math.min(limit, pos + amount) : Math.max(0, pos - amount);\n            const eFactor = (factor * Math.abs(nextPos - pos)) / amount;\n            CssVars.transition(ref, eFactor, noAnimation).then(() => setPos(nextPos));\n        },\n        [noAnimation, amount, length, pos, length, limit] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    const pageRef = useRef(page);\n    pageRef.current = page;\n\n    const prev = useCallback(() => pageRef.current(-1), []);\n    const next = useCallback(() => pageRef.current(1), []);\n\n    return [pos, prev, next, isLeft, isRight];\n};\n","import React, { ReactNode, useMemo } from 'react';\nimport { useSlideAmounts } from './useSlideAmounts';\n\nexport const useSlides = (children: ReactNode[], amount: number, pos: number): ReactNode[] => {\n    const amounts = useSlideAmounts(amount);\n    return useMemo(\n        () =>\n            amounts.map(i => (\n                <div className=\"staged-child\" key={pos + i}>\n                    {children[pos + i] || <div />}\n                </div>\n            )),\n        [children, amounts, pos]\n    );\n};\n","export const modulo = (num: number, base: number) => ((num % base) + base) % base;\n","import React, { ReactNode, useRef } from 'react';\nimport { useArrangeAfterResize } from './useArrangeAfterResize';\nimport { useInitCssVars, SlideAnimation } from './css-vars';\nimport { StagedDraggable } from './StagedDraggable';\nimport { useAutoSlide } from './useAutoSlide';\nimport { useInfinitySlides } from './useInfinitySlides';\nimport { useInfinityPaging } from './useInfinityPaging';\n\ntype InfinityStagedProps = {\n    children: ReactNode[];\n    amount?: number;\n    hideArrows?: boolean;\n    autoSlide?: number;\n    noDrag?: boolean;\n    animation?: SlideAnimation;\n};\n\nexport const InfinityStaged: React.FC<InfinityStagedProps> = ({\n    children,\n    amount = 1,\n    hideArrows,\n    autoSlide,\n    noDrag,\n    animation,\n}) => {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const stagedRef = useRef<HTMLDivElement | null>(null);\n    useArrangeAfterResize(ref);\n    useInitCssVars(ref, amount, animation);\n    const [{ pos, paged }, prev, next] = useInfinityPaging(ref, children.length, amount, animation === 'none');\n    const autoSlider = useAutoSlide(next, autoSlide);\n    const slides = useInfinitySlides(children, amount, pos, paged);\n\n    return (\n        <div className=\"staged-outer\" ref={ref}>\n            {hideArrows || <div className=\"staged-left-nav\" onClick={prev} />}\n            {noDrag ? (\n                <div className=\"staged\" ref={stagedRef}>\n                    {slides}\n                </div>\n            ) : (\n                <StagedDraggable\n                    outerRef={ref}\n                    forwardRef={stagedRef}\n                    prev={prev}\n                    next={next}\n                    slides={slides}\n                    autoSlider={autoSlider}\n                />\n            )}\n            {hideArrows || <div className=\"staged-right-nav\" onClick={next} />}\n        </div>\n    );\n};\n","import { useCallback, useState, useRef } from 'react';\nimport { CssVars, StagedRef } from './css-vars';\nimport { modulo } from './util';\n\ntype UseInfinityPagingReturnType = [{ pos: number; paged: number }, () => void, () => void];\n\nexport const useInfinityPaging = (\n    ref: StagedRef,\n    length: number,\n    amount: number,\n    noAnimation: boolean\n): UseInfinityPagingReturnType => {\n    const [state, setState] = useState({ pos: 0, paged: 0 });\n\n    const page = useCallback(\n        (factor: -1 | 1) => {\n            CssVars.transition(ref, factor, noAnimation).then(() =>\n                setState(({ pos, paged }) => ({\n                    pos: modulo(pos + factor * amount, length),\n                    paged: paged + factor,\n                }))\n            );\n        },\n        [noAnimation, amount, length] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    const pageRef = useRef(page);\n    pageRef.current = page;\n\n    const prev = useCallback(() => pageRef.current(-1), []);\n    const next = useCallback(() => pageRef.current(1), []);\n\n    return [state, prev, next];\n};\n","import React, { ReactNode, useMemo } from 'react';\nimport { modulo } from './util';\nimport { useSlideAmounts } from './useSlideAmounts';\n\nexport const useInfinitySlides = (children: ReactNode[], amount: number, pos: number, paged: number): ReactNode[] => {\n    const amounts = useSlideAmounts(amount);\n    return useMemo(\n        () =>\n            amounts.map(i => (\n                <div className=\"staged-child\" key={modulo(paged * amount + i, amount * 3)}>\n                    {children[modulo(pos + i, children.length)]}\n                </div>\n            )),\n        [children, amounts, pos, amount, paged]\n    );\n};\n","export type Article = { authors: string; title: string; cover: string };\n\nexport const articles: Article[] = [\n    {\n        authors: 'Charlotte Link',\n        title: 'Investigations',\n        cover: '/2016/09/10/17/18/book-1659717__340.jpg',\n    },\n    {\n        authors: 'Helen Fields',\n        title: 'The perfect silence',\n        cover: '/2014/11/27/10/29/forest-547363__340.jpg',\n    },\n    {\n        authors: 'Carmen Korn',\n        title: 'Alligators in the canals',\n        cover: '/2018/09/14/22/57/manhole-cover-3678303__340.jpg',\n    },\n    {\n        authors: 'Julia Kaufhold',\n        title: 'Jobs of the future',\n        cover: '/2016/11/21/14/12/books-1845614__340.jpg',\n    },\n    {\n        authors: 'Rita Falk',\n        title: 'No more wine',\n        cover: '/2015/04/25/03/09/cork-738603__340.jpg',\n    },\n    {\n        authors: 'Andreas Gruber',\n        title: 'Baby Jackson',\n        cover: '/2016/05/17/22/16/baby-1399332__340.jpg',\n    },\n    {\n        authors: 'Annette Hess',\n        title: 'Ice, ice and more ice',\n        cover: '/2017/11/28/22/25/lapland-2984828__340.jpg',\n    },\n    {\n        authors: 'Lori Nelson Spielman',\n        title: 'Dream today for tomorrow',\n        cover: '/2015/07/12/14/26/coffee-842020__340.jpg',\n    },\n    {\n        authors: 'Elizabeth George',\n        title: 'The heaven is no shelter',\n        cover: '/2017/01/06/23/03/sunrise-1959227__340.jpg',\n    },\n    {\n        authors: 'Jussi Adler-Olsen',\n        title: 'Bad little murders',\n        cover: '/2017/05/13/12/40/fashion-2309519__340.jpg',\n    },\n];\n","import React, { useCallback, useState } from 'react';\nimport { Article } from './mocks';\n\nexport type ImgProps = { article: Article };\n\nexport const Img: React.FC<ImgProps> = ({ article: { title, cover } }) => {\n    const [clicked, setClicked] = useState<boolean>(false);\n\n    const onClick = useCallback(() => {\n        setClicked(true);\n        setTimeout(() => setClicked(false), 250);\n    }, []);\n\n    return (\n        <img\n            className={clicked ? 'clicked' : ''}\n            src={`https://cdn.pixabay.com/photo${cover}`}\n            alt={title}\n            draggable={false}\n            onClick={onClick}\n        />\n    );\n};\n","import React from 'react';\nimport { InfinityStaged } from './staged';\nimport { articles } from './mocks';\nimport { Img } from './Img';\n\nexport const Example1: React.FC = () => (\n    <div className=\"example-1\">\n        <div className=\"description\">\n            <h2>Example 1</h2>\n            <p>{'<InfinityStaged amount={3}>'}</p>\n        </div>\n        <InfinityStaged amount={3}>\n            {articles.map((a, i) => (\n                <Img article={a} key={i} />\n            ))}\n        </InfinityStaged>\n    </div>\n);\n","import React, { useCallback, useState } from 'react';\nimport { InfinityStaged } from './staged';\nimport { articles } from './mocks';\nimport { Img } from './Img';\n\nconst differentSort = [...articles];\ndifferentSort.sort(() => 0.5 - Math.random());\n\nexport const Example2: React.FC = () => {\n    const [autoSlide, setAutoSlide] = useState<number | undefined>(5000);\n\n    const onChange = useCallback(e => {\n        const next = +e.target.value;\n        if (!isNaN(next)) setAutoSlide(next || undefined);\n    }, []);\n\n    return (\n        <div className=\"example-2\">\n            <div className=\"description\">\n                <h2>Example 2</h2>\n                <p>{`<InfinityStaged hideArrows autoSlide={${autoSlide}} animation=\"ease-in\">`}</p>\n                <label htmlFor=\"example-2-autoSlide\">autoSlide (in ms): </label>\n                <input id=\"example-2-autoSlide\" type=\"number\" value={String(autoSlide || '')} onChange={onChange} />\n            </div>\n            <div className=\"carousel\">\n                <InfinityStaged hideArrows autoSlide={autoSlide} animation=\"ease-in\">\n                    {differentSort.map((a, i) => (\n                        <Img article={a} key={i} />\n                    ))}\n                </InfinityStaged>\n            </div>\n        </div>\n    );\n};\n","import React from 'react';\nimport { Staged } from './staged';\nimport { articles } from './mocks';\nimport { Img } from './Img';\n\nexport const Example3: React.FC = () => (\n    <div className=\"example-3\">\n        <div className=\"description\">\n            <h2>Example 3</h2>\n            <p>In some cases it might be necessary to disable animations.</p>\n            <p>{'<Staged amount={2} noDrag animation=\"none\">'}</p>\n        </div>\n        <Staged amount={2} noDrag animation=\"none\">\n            {articles.slice(0, 6).map((a, i) => (\n                <Img article={a} key={i} />\n            ))}\n        </Staged>\n    </div>\n);\n","import React from 'react';\nimport { InfinityStaged } from './staged';\nimport { articles } from './mocks';\nimport { Img } from './Img';\n\nexport const Example4: React.FC = () => (\n    <div className=\"example-4\">\n        <div className=\"description\">\n            <h2>Example 4</h2>\n            <p>{'Only 2 children'}</p>\n            <p>{`<InfinityStaged animation=\"cubic-bezier(.19,.91,.24,.87)\">`}</p>\n        </div>\n        <InfinityStaged animation=\"cubic-bezier(.19,.91,.24,.87)\">\n            {articles.slice(0, 2).map((a, i) => (\n                <Img article={a} key={i} />\n            ))}\n        </InfinityStaged>\n    </div>\n);\n","import React from 'react';\nimport { useMedia } from 'react-use';\nimport { Staged } from './staged';\nimport { Article, articles } from './mocks';\nimport { Img } from './Img';\n\nconst ArticleView: React.FC<{ article: Article }> = ({ article }) => (\n    <div className=\"article\">\n        <div className=\"cover\">\n            <Img article={article} />\n        </div>\n        <div className=\"title\">{article.title}</div>\n        <div className=\"authors\">{article.authors}</div>\n    </div>\n);\n\nexport const Example5: React.FC = () => {\n    const isSmall = useMedia('(max-width: 650px)');\n    const amount = isSmall ? 2 : 5;\n    return (\n        <div className=\"example-5\">\n            <div className=\"description\">\n                <h2>Example 5</h2>\n                <p>- You can stage arbitrary React nodes.</p>\n                <p>- Please notice the breakpoint at 650px screen width.</p>\n                <p>{`<Staged amount={${amount}}>`}</p>\n            </div>\n            <Staged amount={amount}>\n                {articles.map((a, i) => (\n                    <ArticleView article={a} key={i} />\n                ))}\n            </Staged>\n        </div>\n    );\n};\n","import React from 'react';\nimport { Staged } from './staged';\n\nconst nums = new Array(7).fill(null).map((_, i) => i + 1);\n\nexport const Example6: React.FC = () => {\n    return (\n        <div className=\"example-6\">\n            <div className=\"description\">\n                <h2>Example 6</h2>\n                <p>- The slider automatically adjusts sliding amounts.</p>\n                <p>{`<Staged amount={3}>`}</p>\n            </div>\n            <Staged amount={3}>\n                {nums.map(n => (\n                    <div className=\"huge-num-container\" key={n}>\n                        <div className=\"huge-num\">{n}</div>\n                    </div>\n                ))}\n            </Staged>\n        </div>\n    );\n};\n","import './assets/main.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport { Example1 } from './Example1';\nimport { Example2 } from './Example2';\nimport { Example3 } from './Example3';\nimport { Example4 } from './Example4';\nimport { Example5 } from './Example5';\nimport { Example6 } from './Example6';\n\nexport const App: React.FC = () => (\n    <div className=\"App\">\n        <Example1 />\n        <Example2 />\n        <Example3 />\n        <Example4 />\n        <Example5 />\n        <Example6 />\n    </div>\n);\n"],"sourceRoot":""}